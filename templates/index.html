<!DOCTYPE html>
<html>
<head>
    <title>Book Q&A App</title>
</head>
<body>

<table style="width:100%">
    <tr>
        <!-- AUDIO INTERACTION SECTION -->
        <td style="width:50%; vertical-align: top;">
            <h2>Ask a Question About the Uploaded Book</h2>

            <p><strong>Step 1:</strong> Upload a book (PDF) below.</p>
            <form action="/upload_book" method="post" enctype="multipart/form-data">
                <input type="file" name="book_pdf" accept=".pdf" required>
                <input type="submit" value="Upload Book">
            </form>

            {% if book %}
                <p> <strong>Currently Loaded Book:</strong> {{ book }}</p>
            {% else %}
                <p>No book uploaded yet.</p>
            {% endif %}

            <hr>

            <p><strong>Step 2:</strong> Record your question below.</p>
            <button id="record">Record</button>
            <button id="stop">Stop</button>
            <span id="timer">00:00</span>
            <audio id="audio"></audio>

            <form id="uploadForm" action="/upload" method="POST" enctype="multipart/form-data">
                <input type="hidden" name="audio_data" id="audioData">
            </form>

            <hr>
        
            <p><strong>Step 3:
                
            
            
                <h3>LLM Response:</h3>
                <p>{{ llm_response }}</p>
                <audio controls>
                    <source src="./audio/response.wav">
                    Your browser does not support the audio element.
                </audio><br>
            

            <!-- Display response.txt content if it exists -->
            
                <p>Response from File:</p>
                <pre>{{ response_text }}</pre>
            
        </td>
    </tr>
</table>

<!-- Script must be loaded at the end -->
<script src="script.js"></script>

</body>
</html>
